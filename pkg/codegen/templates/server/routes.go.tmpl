{{/*
SPDX-FileCopyrightText: 2025 OpenCHAMI a Series of LF Projects, LLC

SPDX-License-Identifier: MIT
*/}}
// Code generated by Fabrica {{.Version}}. DO NOT EDIT.
// Copyright Â© 2025 OpenCHAMI a Series of LF Projects, LLC
//
// SPDX-License-Identifier: MIT
//
// This file contains REST API route registrations for all resources.
// Generated from: pkg/codegen/templates/routes.go.tmpl
//
// To modify route registration:
//	1. Edit the template file: pkg/codegen/templates/routes.go.tmpl
//	2. Run 'make dev' to regenerate
//	3. Do NOT edit this file directly - changes will be lost
//
// This file registers routes for all resource types:
{{range .Resources}}//	- {{.URLPath}} ({{.Name}} operations)
{{end}}//
// Route patterns:
//	- GET	/resource				-> List all resources
//	- GET	/resource/{uid}			-> Get specific resource
//	- POST	/resource				-> Create new resource
//	- PUT	/resource/{uid}			-> Update resource spec
//	- PATCH	/resource/{uid}			-> Patch resource spec
//	- DELETE /resource/{uid}		-> Delete resource
//	- PUT	/resource/{uid}/status	-> Update resource status
//	- PATCH	/resource/{uid}/status	-> Patch resource status
//
// To add middleware to routes:
//	1. Apply middleware in cmd/server/main.go before calling RegisterGeneratedRoutes
//	2. Use r.Use() calls in main.go, not in generated route functions
//
// To add custom routes:
//	1. Create a separate RegisterCustomRoutes function
//	2. Call it after RegisterGeneratedRoutes in main.go
//
package main

import (
	"github.com/go-chi/chi/v5"
)

// RegisterGeneratedRoutes registers all generated routes
// Note: Middleware should be applied in main.go before calling this function
func RegisterGeneratedRoutes(r chi.Router) {
	// 1. Standard Envelope API Routes
{{range .Resources}}
	// {{.Name}} routes
	r.Route("{{.URLPath}}", func(r chi.Router) {
		r.Get("/", Get{{.Name}}s)
		r.Post("/", Create{{.Name}})
		r.Route("/{uid}", func(r chi.Router) {
			r.Get("/", Get{{.Name}})
			r.Put("/", Update{{.Name}})
			r.Patch("/", Patch{{.Name}})
			r.Delete("/", Delete{{.Name}})

			// Status subresource
			r.Route("/status", func(r chi.Router) {
				r.Put("/", Update{{.Name}}Status)
				r.Patch("/", Patch{{.Name}}Status)
			})

			{{- if .Tags }}{{- if eq (index .Tags "versioning") "enabled" }}
			// Versions subresource
			r.Route("/versions", func(r chi.Router) {
				r.Get("/", List{{.Name}}Versions)
				r.Get("/{versionID}", Get{{.Name}}Version)
				r.Delete("/{versionID}", Delete{{.Name}}Version)
			})
			{{- end }}{{- end }}
		})
	})
{{end}}

	// 2. Flat API Routes (POC)
	// These routes provide a simplified, flattened JSON structure at /spec2
	r.Route("/spec2", func(r chi.Router) {
{{range .Resources}}
		r.Route("{{.URLPath}}", func(r chi.Router) {
			r.Get("/", Get{{.Name}}sFlat)
			r.Post("/", Create{{.Name}}Flat)
			r.Get("/{uid}", Get{{.Name}}Flat)
			r.Put("/{uid}", Update{{.Name}}Flat)
			// Note: Delete is the same for both APIs, so we can reuse the envelope handler if we wanted,
			// or implement a specific one. For this POC, we'll stick to the core read/write operations.
		})
{{end}}
	})

	// OpenAPI documentation routes
	r.Get("/openapi.json", ServeOpenAPISpec)
	r.Get("/docs", ServeSwaggerUI)
}